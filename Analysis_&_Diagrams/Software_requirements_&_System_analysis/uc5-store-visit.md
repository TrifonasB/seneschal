# ΠΧ5. Καταγραφή Επίσκεψης σε Κατάστημα

**Πρωτεύων Actor**: Χρήστης  
**Ενδιαφερόμενοι**  
**Χρήστης**: Θέλει να καταγράφει τις αγορές του ώστε να ενημερώνονται αυτόματα οι λίστες του και να αποθηκεύονται χρήσιμα στατιστικά στοιχεία.  
**Προϋποθέσεις**: -

## Βασική Ροή

1. Ο χρήστης εκκινά την καταγραφή επίσκεψης σε ένα κατάστημα.
2. Το σύστημα προτρέπει για το κατάστημα στο οποίο έγινε η επίσκεψη, το μέσο πληρωμής που χρησιμοποιήθηκε και την ημερομηνία επίσκεψης.
3. Ο χρήστης επιλέγει το κατάστημα και το μέσο πληρωμής, εισάγει τη ζητούμενη ημερομηνία και επιβεβαιώνει την επιλογή του.
4. Το σύστημα προτρέπει για προεραιτική επιλογή των λιστών που θα επηρεάσει η επίσκεψη.
5. Ο χρήστης επιλέγει τις λίστες και επιβεβαιώνει την επιλογή του.
6. Το σύστημα εμφανίζει τα καταχωρημένα προϊόντα.
7. Ο χρήστης επιλέγει το προϊόν που αγόρασε, εισάγει την ποσότητα και την τιμή αγοράς, και το προσθέτει στο καλάθι.
8.  Το σύστημα προσθέτει την τιμή στα έξοδα της τρέχουσας επίσκεψης.
9.  Το σύστημα επιβεβαιώνει πως τα έξοδα της τρέχουσας επίσκεψης δεν πλησιάζουν το διαθέσιμο υπόλοιπο του επιλεγμένου μέσου.
10. Ο χρήστης επιλέγει τον τερματισμό επίσκεψης και ζητά την καταγραφή της.
11. Το σύστημα αφαιρεί οριστικά τα έξοδα της επίσκεψης από το υπόλοιπο του επιλεγμένου μέσου.
12. Το σύστημα αφαιρεί την ποσότητα κάθε προϊόντος από την επόμενη στη σειρά επιλεγμένη λίστα που το περιέχει μέχρι να εξαντληθεί η αγορασμένη ποσότητα / μέχρι η αγορασμένη ποσότητα να έχει καλύψει όλες τις επιλεγμένες λίστες.
13. Το σύστημα παράγει ένα μοναδικό κωδικό επίσκεψης και την καταγράφει μαζί με τα συνολικά της έξοδα.
14. Το σύστημα εμφανίζει μήνυμα επιτυχούς καταγραφής.

Ο χρήστης επναλαμβάνει τα βήματα 7 έως 9 για όλα τα προϊόντα της επίσκεψης.


## Εναλλακτικές Ροές
2α. Δεν έχουν καταχωρηθεί καταστήματα ή μέσα πληρωμής
1. Η ΠΧ τερματίζει.

6α. Δεν έχουν καταχωρηθεί προϊόντα
1. Η ΠΧ τερματίζει.

9α. Τα συνολικά έξοδα της τρέχουσας επίσκεψης πλησιάζουν / ξεπερνούν το διαθέσιμο υπόλοιπο
1. Το σύστημα παρουσιάζει κατάλληλη ειδοποίηση.
2. Η ΠΧ επιστρέφει στο βήμα 7 της βασικής ροής.

11α. Τα συνολικά έξοδα της επίσκεψης ξεπερνούν / είναι ίσα με το διαθέσιμο υπόλοιπο
1. Το σύστημα παρουσιάζει πάλι κατάλληλη ειδοποίηση.
2. Το σύστημα θέτει το υπόλοιπο του επιλεγμένου μέσου σε 0 και το καθιστά αδύνατο για χρήση.
3. Η ΠΧ επιστρέφει στο βήμα 12.